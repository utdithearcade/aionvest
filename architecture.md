# AIONVEST — LLM-Powered Stock Intelligence Platform

**Technology Stack:**
Next.js (Frontend) • NestJS (Backend) • Gemini API (AI Engine) • MariaDB/MySQL (Database)

**Objective:**
Aionvest is an AI-driven stock intelligence system that helps investors make better decisions by automatically analyzing market data, financial indicators, and news sentiment.
The platform’s goal is to automate human-level reasoning — identifying undervalued stocks, detecting potential acquisition targets, and providing buy/sell recommendations — with explainable insights and data-driven metrics.

---

## 1. System Overview

Aionvest is composed of three primary layers: **data processing**, **AI reasoning**, and **visual intelligence**.

* The **backend (NestJS)** gathers market and news data, formats it, and communicates with the **Gemini API**, which performs the analytical reasoning.
* The results are stored in **MariaDB/MySQL**, then exposed to the **Next.js frontend** for visualization and investor interaction.

**Simplified Data Flow:**

```
[ Market & News APIs ]
        ↓
[ NestJS Backend ]
  - Data Fetching & Normalization
  - AI Request to Gemini
  - Store Analyzed Data
        ↓
[ MariaDB / MySQL ]
        ↓
[ Next.js Frontend ]
  - Visualization (Charts & Insights)
  - Investor Recommendations
```

---

## 2. Application Workflow

### 2.1 Data Gathering (Backend)

* The NestJS backend runs scheduled jobs to fetch:

  * Stock price data (historical and live)
  * Trading volume and ratio data
  * Relevant financial news and market articles
* Data is stored in the database tables `raw_stocks` and `raw_news` for further analysis.

### 2.2 AI Reasoning (Gemini API)

* The backend compiles structured input for each stock and sends it to the Gemini API.
* The AI model analyzes:

  * Price behavior
  * Fundamental data
  * News sentiment
    and returns both qualitative and quantitative insights.

**Example Input:**

```json
{
  "symbol": "BBCA",
  "prices": [...],
  "fundamentals": {...},
  "news": [...]
}
```

**Example Output:**

```json
{
  "valuation_gap": 0.35,
  "sentiment_score": 0.4,
  "acquisition_probability": 0.7,
  "recommendation": "BUY",
  "explanation": "The stock appears undervalued with positive sentiment and growing acquisition potential."
}
```

### 2.3 Data Storage

* The backend validates and stores all AI outputs in `analysis_results`.
* Results are versioned by date, allowing historical performance comparison and trend visualization.

### 2.4 Presentation (Frontend)

* The Next.js frontend retrieves data via REST endpoints.
* The interface presents:

  * Candlestick charts with AI valuation overlays
  * Sentiment and acquisition probability graphs
  * Explanatory text generated by the AI
  * Buy/Hold/Sell recommendations with confidence levels

---

## 3. Role of the AI Engine (Gemini API)

### 3.1 Input Composition

The system provides Gemini with:

* Latest 30-day stock prices
* Core financial ratios (PE, PBV, ROE, EPS, debt-to-equity)
* Recent top news headlines and snippets
* Company and sector information

### 3.2 AI Responsibilities

The Gemini model performs several analytical functions:

1. Evaluate the company’s intrinsic valuation compared to its market price.
2. Assess news sentiment and determine its market relevance.
3. Detect acquisition or accumulation signals from data patterns.
4. Synthesize all insights into a structured JSON response containing numeric metrics and explanatory text.

### 3.3 Expected Output Fields

| Field                     | Type            | Description                                                  |
| ------------------------- | --------------- | ------------------------------------------------------------ |
| `valuation_gap`           | Float (-1 to 1) | Difference between market price and AI-estimated fair value. |
| `sentiment_score`         | Float (-1 to 1) | Average sentiment derived from recent news.                  |
| `acquisition_probability` | Float (0 to 1)  | Likelihood that the stock may become an acquisition target.  |
| `recommendation`          | Enum            | BUY, HOLD, or SELL recommendation.                           |
| `explanation`             | String          | Brief text summary explaining the AI’s reasoning.            |

---

## 4. Functional Features

| Feature                    | Description                                                            |
| -------------------------- | ---------------------------------------------------------------------- |
| AI Market Analysis         | Automated interpretation of financial data and sentiment using Gemini. |
| Investment Recommendations | Buy, hold, or sell suggestions based on AI confidence levels.          |
| Insight Dashboard          | AI-generated summaries presented as human-readable analysis.           |
| Interactive Charts         | Visual representation of valuation, sentiment, and acquisition trends. |
| Watchlist Management       | Track selected stocks and receive updated AI signals.                  |
| Historical Trend Review    | Compare AI insights over time to study long-term patterns.             |

---

## 5. Technical Architecture

| Layer     | Technology                   | Purpose                                        |
| --------- | ---------------------------- | ---------------------------------------------- |
| Frontend  | Next.js (React + TypeScript) | User interface and data visualization          |
| Backend   | NestJS (TypeScript)          | API management, scheduling, Gemini integration |
| AI        | Gemini API                   | Natural language and analytical reasoning      |
| Database  | MariaDB / MySQL              | Centralized data storage                       |
| Scheduler | Node Cron                    | Periodic data updates and AI refresh tasks     |
| Charts    | ApexCharts / Chart.js        | Market visualization and analytics graphs      |

---

## 6. Data Pipeline Description

1. **FetchDataJob:** Collects market and news data from APIs.
2. **FormatDataService:** Normalizes and prepares structured data for Gemini.
3. **GeminiService:** Sends prompt requests, parses AI responses.
4. **AnalysisRepository:** Saves processed analysis results in MariaDB.
5. **Frontend API Requests:** Retrieves and displays AI insights dynamically.

---

## 7. Database Schema (MariaDB)

### Table: `stocks`

| Column     | Type    | Description           |
| ---------- | ------- | --------------------- |
| id         | INT     | Primary key           |
| symbol     | VARCHAR | Stock symbol          |
| name       | VARCHAR | Company name          |
| sector     | VARCHAR | Sector classification |
| market_cap | FLOAT   | Market capitalization |

### Table: `news`

| Column       | Type     | Description          |
| ------------ | -------- | -------------------- |
| id           | INT      | Primary key          |
| symbol       | VARCHAR  | Related stock symbol |
| title        | VARCHAR  | News headline        |
| content      | TEXT     | News summary         |
| published_at | DATETIME | Publication date     |

### Table: `analysis_results`

| Column                  | Type     | Description               |
| ----------------------- | -------- | ------------------------- |
| id                      | INT      | Primary key               |
| symbol                  | VARCHAR  | Stock symbol              |
| date                    | DATETIME | Date of analysis          |
| valuation_gap           | FLOAT    | Valuation deviation       |
| sentiment_score         | FLOAT    | Sentiment value           |
| acquisition_probability | FLOAT    | Acquisition likelihood    |
| recommendation          | VARCHAR  | BUY, HOLD, or SELL        |
| explanation             | TEXT     | AI explanation            |
| created_at              | DATETIME | Record creation timestamp |

---

## 8. Frontend Visualization

### Dashboard

* Displays a ranked list of stocks by AI confidence and acquisition probability.
* Offers a summary of market trends and aggregate sentiment.

### Stock Detail Page

* Interactive candlestick chart with AI-calculated fair value overlay.
* Historical sentiment and acquisition probability charts.
* Text-based AI explanation section.

### Watchlist

* Allows users to bookmark specific stocks.
* Provides live updates whenever new AI results are generated.

---

## 9. AI Prompt Example (Backend)

```typescript
const prompt = `
You are a professional financial analyst.
Analyze the following stock data and return a JSON-formatted response.

Stock Symbol: ${symbol}
Price History: ${JSON.stringify(priceData)}
News Headlines: ${JSON.stringify(newsData)}
Financial Ratios: ${JSON.stringify(financialData)}

Respond strictly in JSON format:
{
  "valuation_gap": float (-1 to 1),
  "sentiment_score": float (-1 to 1),
  "acquisition_probability": float (0 to 1),
  "recommendation": "BUY" | "HOLD" | "SELL",
  "explanation": "short text summary"
}
`;
```

---

## 10. API Endpoints (NestJS)

| Method | Endpoint                | Description                         |
| ------ | ----------------------- | ----------------------------------- |
| GET    | `/api/stocks`           | Retrieves list of tracked stocks    |
| GET    | `/api/stocks/:symbol`   | Retrieves data for a specific stock |
| GET    | `/api/analysis/:symbol` | Retrieves AI analysis result        |
| POST   | `/api/analyze/:symbol`  | Executes new AI analysis via Gemini |
| GET    | `/api/stocks/top`       | Lists top stocks by AI ranking      |

---

## 11. MVP Development Roadmap

| Phase   | Objective                                                         |
| ------- | ----------------------------------------------------------------- |
| Phase 1 | Initialize Next.js and NestJS with TypeScript configuration.      |
| Phase 2 | Integrate MariaDB and define database schema.                     |
| Phase 3 | Implement data fetchers for market and news APIs.                 |
| Phase 4 | Integrate Gemini API for AI reasoning.                            |
| Phase 5 | Develop API endpoints and frontend dashboard.                     |
| Phase 6 | Add charting, watchlist, and historical views.                    |
| Phase 7 | Deploy production build using Docker with HTTPS and domain setup. |

---

## 12. System Outcome

Upon completion, Aionvest will operate as an intelligent analytical engine capable of:

* Performing financial and sentiment analysis autonomously.
* Translating AI reasoning into numerical and textual insights.
* Assisting investors in making rational, data-informed decisions.
* Continuously learning from market behavior to refine prediction accuracy.

This architecture ensures scalability, modular development, and full compatibility within a unified JavaScript ecosystem, leveraging Gemini as the reasoning core.

---
